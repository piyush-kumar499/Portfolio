<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portfolio Projects - Web Development, Design, and Programming Projects">
    <title>Projects - Your Name</title>
    <link rel="stylesheet" href="assets/css/projects.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Add inline styles to prevent layout issues -->
    <style>
        /* Ensure proper layout structure */
        body {
            padding-top: 80px !important;
            margin: 0 !important;
            min-height: 100vh !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        #header-placeholder {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            z-index: 9999 !important;
            height: 80px !important;
        }
        
        main {
            flex: 1 !important;
            padding-top: 0 !important;
        }
        
        #footer-placeholder {
            margin-top: auto !important;
            position: relative !important;
            z-index: 100 !important;
        }
        
        @media (max-width: 768px) {
            body {
                padding-top: 70px !important;
            }
            #header-placeholder {
                height: 70px !important;
            }
        }
    </style>
</head>
<body class="portfolio-body">
    <!-- Include Header -->
    <div id="header-placeholder"></div>

    <!-- Main Content Wrapper -->
    <main>
        <!-- Projects Hero Section -->
        <section class="projects-hero">
            <div class="container">
                <h1 class="page-title">My <span class="highlight">Projects</span></h1>
                <p class="page-subtitle">A showcase of my work, creativity, and technical expertise</p>
                
                <!-- Project Filter -->
                <div class="project-filters">
                    <button class="filter-btn active" data-filter="all">All Projects</button>
                    <button class="filter-btn" data-filter="web">Web Development</button>
                    <button class="filter-btn" data-filter="mobile">Mobile Apps</button>
                    <button class="filter-btn" data-filter="design">Design</button>
                    <button class="filter-btn" data-filter="other">Other</button>
                </div>
            </div>
        </section>

        <!-- Projects Grid -->
        <section class="projects-section">
            <div class="container">
                <div class="projects-grid" id="projects-grid">
                    <!-- Projects will be populated by JavaScript -->
                </div>
            </div>
        </section>
    </main>

    <!-- Project Modal -->
    <div class="modal" id="project-modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div class="modal-body" id="modal-body">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Include Footer -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="assets/js/data.js"></script>
    <script src="assets/js/main.js"></script>
<script>
    // Enhanced initialization with URL parameter handling
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Projects page DOM loaded');
        
        // Force body layout structure immediately
        document.body.classList.add('portfolio-body');
        document.body.style.paddingTop = '80px';
        document.body.style.margin = '0';
        document.body.style.minHeight = '100vh';
        document.body.style.display = 'flex';
        document.body.style.flexDirection = 'column';
        
        // Use the more reliable sequential loading function
        if (typeof window.loadComponentsSequentially === 'function') {
            window.loadComponentsSequentially(function() {
                console.log('Components loaded, initializing projects page');
                
                // Add extra safety delay for projects page
                setTimeout(function() {
                    try {
                        populateProjectsPage();
                        initializeProjectFilters();
                        initializeProjectModal();
                        
                        // Initialize project image viewer
                        if (typeof initializeProjectImageViewer === 'function') {
                            initializeProjectImageViewer();
                        }
                        
                        // Handle project redirect from homepage
                        handleProjectRedirect();
                        
                        console.log('Projects page populated successfully');
                        
                        // Ensure footer is at bottom
                        const footer = document.getElementById('footer-placeholder');
                        if (footer) {
                            footer.style.marginTop = 'auto';
                            footer.style.position = 'relative';
                            footer.style.zIndex = '100';
                        }
                        
                    } catch (error) {
                        console.error('Error populating projects page:', error);
                    }
                }, 300);
            });
        } else {
            // Fallback to the other function
            console.log('Using fallback loading function');
            window.loadComponentsAndInit(function() {
                setTimeout(function() {
                    try {
                        populateProjectsPage();
                        initializeProjectFilters();
                        initializeProjectModal();
                        
                        // Initialize project image viewer
                        if (typeof initializeProjectImageViewer === 'function') {
                            initializeProjectImageViewer();
                        }
                        
                        // Handle project redirect from homepage
                        handleProjectRedirect();
                        
                        // Ensure footer is at bottom
                        const footer = document.getElementById('footer-placeholder');
                        if (footer) {
                            footer.style.marginTop = 'auto';
                            footer.style.position = 'relative';
                            footer.style.zIndex = '100';
                        }
                        
                    } catch (error) {
                        console.error('Error populating projects page:', error);
                    }
                }, 400);
            });
        }
    });
    
    // Additional safety check after window load
    window.addEventListener('load', function() {
        console.log('Projects page fully loaded');
        
        // Final verification of layout
        setTimeout(function() {
            const header = document.getElementById('header-placeholder');
            const footer = document.getElementById('footer-placeholder');
            
            if (header) {
                header.style.position = 'fixed';
                header.style.top = '0';
                header.style.zIndex = '9999';
            }
            
            if (footer) {
                footer.style.position = 'relative';
                footer.style.marginTop = 'auto';
                footer.style.zIndex = '100';
            }
            
            console.log('Final layout verification completed');
        }, 500);
    });
</script>
</body>
</html>
